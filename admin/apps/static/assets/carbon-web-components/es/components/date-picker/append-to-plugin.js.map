{"version":3,"sources":["components/date-picker/append-to-plugin.ts"],"names":["config","fp","handlePreCalendarPosition","Promise","resolve","calendarContainer","fpConfig","_positionElement","positionElement","appendTo","top","containerTop","getBoundingClientRect","bottom","refBottom","isRtl","ownerDocument","defaultView","getComputedStyle","getPropertyValue","style","left","right","register","loadedPlugins","push","onReady","onPreCalendarPosition"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA;AACA;AACA;;AAQA;AACA;AACA;AACA;AACA,gBAAgBA,MAAD,IACZC,EAAD,IAA2B;AACzB;AACJ;AACA;AACI,QAAMC,yBAAyB,GAAG,YAAY;AAC5C,UAAMC,OAAO,CAACC,OAAR,EAAN;AACA,UAAM;AAAEC,MAAAA,iBAAF;AAAqBL,MAAAA,MAAM,EAAEM,QAA7B;AAAuCC,MAAAA,gBAAgB,EAAEC;AAAzD,QAA6EP,EAAnF;AACA,UAAM;AAAEQ,MAAAA;AAAF,QAAeH,QAArB;AACA,UAAM;AAAEI,MAAAA,GAAG,EAAEC;AAAP,QAAwBF,QAAQ,CAAEG,qBAAV,EAA9B;AACA,UAAM;AAAEC,MAAAA,MAAM,EAAEC;AAAV,QAAwBN,eAAe,CAACI,qBAAhB,EAA9B;AACA,UAAMG,KAAK,GAAGN,QAAQ,CAAEO,aAAV,CAAyBC,WAAzB,CAAsCC,gBAAtC,CAAuDT,QAAvD,EAAkEU,gBAAlE,CAAmF,WAAnF,MAAoG,KAAlH;AACAd,IAAAA,iBAAiB,CAACe,KAAlB,CAAwBV,GAAxB,GAA+B,GAAEI,SAAS,GAAGH,YAAa,IAA1D;AACAN,IAAAA,iBAAiB,CAACe,KAAlB,CAAwBC,IAAxB,GAA+B,CAACN,KAAD,GAAS,GAAT,GAAe,MAA9C;AACAV,IAAAA,iBAAiB,CAACe,KAAlB,CAAwBE,KAAxB,GAAgC,CAACP,KAAD,GAAS,MAAT,GAAkB,GAAlD;AACD,GAVD;AAYA;AACJ;AACA;AACA;;;AACI,QAAMQ,QAAQ,GAAG,MAAM;AACrBtB,IAAAA,EAAE,CAACuB,aAAH,CAAiBC,IAAjB,CAAsB,+BAAtB;AACD,GAFD;;AAIA,SAAO;AACLhB,IAAAA,QAAQ,EAAET,MAAM,CAACS,QADZ;AAELiB,IAAAA,OAAO,EAAEH,QAFJ;AAGLI,IAAAA,qBAAqB,EAAEzB;AAHlB,GAAP;AAKD,CA9BH","sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { Instance as FlatpickrInstance } from 'flatpickr/dist/types/instance';\nimport { Plugin } from 'flatpickr/dist/types/options';\n\n/**\n * The configuration for the Flatpickr plugin to put the calendar dropdown in shadow DOM.\n */\nexport interface DatePickerAppendToPluginConfig {\n  /**\n   * The floating menu container.\n   */\n  appendTo: HTMLElement;\n}\n\n/**\n * @param config Plugin configuration.\n * @returns A Flatpickr plugin to put the calendar dropdown in shadow DOM.\n */\nexport default (config: DatePickerAppendToPluginConfig): Plugin =>\n  (fp: FlatpickrInstance) => {\n    /**\n     * Adjusts the floating meun position after Flatpicker sets it.\n     */\n    const handlePreCalendarPosition = async () => {\n      await Promise.resolve();\n      const { calendarContainer, config: fpConfig, _positionElement: positionElement } = fp;\n      const { appendTo } = fpConfig;\n      const { top: containerTop } = appendTo!.getBoundingClientRect();\n      const { bottom: refBottom } = positionElement.getBoundingClientRect();\n      const isRtl = appendTo!.ownerDocument!.defaultView!.getComputedStyle(appendTo!).getPropertyValue('direction') === 'rtl';\n      calendarContainer.style.top = `${refBottom - containerTop}px`;\n      calendarContainer.style.left = !isRtl ? '0' : 'auto';\n      calendarContainer.style.right = !isRtl ? 'auto' : '0';\n    };\n\n    /**\n     * Registers this Flatpickr plugin.\n     * @param calendar The Flatpickr instance.\n     */\n    const register = () => {\n      fp.loadedPlugins.push('carbonFlatpickrAppendToPlugin');\n    };\n\n    return {\n      appendTo: config.appendTo,\n      onReady: register,\n      onPreCalendarPosition: handlePreCalendarPosition,\n    };\n  };\n"],"file":"append-to-plugin.js"}