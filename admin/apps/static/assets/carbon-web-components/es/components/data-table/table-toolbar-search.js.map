{"version":3,"sources":["components/data-table/table-toolbar-search.ts"],"names":["classMap","html","property","query","customElement","settings","HostListenerMixin","HostListener","INPUT_SIZE","BXSearch","styles","prefix","BXTableToolbarSearch","expanded","updateComplete","_inputNode","inputNode","focus","_handleUserInitiatedExpand","event","contains","relatedTarget","value","type","Boolean","reflect","SMALL","attachShadow","mode","delegatesFocus","Number","exec","navigator","userAgent","hasAttribute","setAttribute","result","size","_handleSearchClick","handleSearchClick","classes"],"mappings":"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","sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit-html/directives/class-map';\nimport { html, property, query, customElement } from 'lit-element';\nimport settings from 'carbon-components/es/globals/js/settings';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport HostListener from '../../globals/decorators/host-listener';\nimport { INPUT_SIZE } from '../input/input';\nimport BXSearch from '../search/search';\nimport styles from './data-table.scss';\n\nconst { prefix } = settings;\n\n/**\n * Table toolbar search.\n * @element bx-table-toolbar-search\n * @fires bx-search-input - The custom event fired after the search content is changed upon a user gesture.\n */\n@customElement(`${prefix}-table-toolbar-search`)\nclass BXTableToolbarSearch extends HostListenerMixin(BXSearch) {\n  @query('input')\n  private _inputNode!: HTMLInputElement;\n\n  /**\n   * Handles user-initiated gestures for expanding the search box.\n   */\n  private async _handleUserInitiatedExpand() {\n    this.expanded = true;\n    await this.updateComplete;\n    const { _inputNode: inputNode } = this;\n    inputNode?.focus();\n  }\n\n  /**\n   * Handles `focus` event handler on this element.\n   */\n  @HostListener('focusin')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleFocusIn() {\n    this._handleUserInitiatedExpand();\n  }\n\n  /**\n   * Handles `blur` event handler on this element.\n   * @param event The event.\n   */\n  @HostListener('focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleFocusOut(event: FocusEvent) {\n    if (!this.contains(event.relatedTarget as Node) && !this.value) {\n      this.expanded = false;\n    }\n  }\n\n  /**\n   * Handles `click` event handler on the search box.\n   */\n  private _handleSearchClick() {\n    this._handleUserInitiatedExpand();\n  }\n\n  /**\n   * `true` if the search box should be expanded.\n   */\n  @property({ type: Boolean, reflect: true })\n  expanded = false;\n\n  /**\n   * The search box size.\n   */\n  @property({ reflect: true })\n  size = INPUT_SIZE.SMALL;\n\n  createRenderRoot() {\n    return this.attachShadow({\n      mode: 'open',\n      delegatesFocus: Number((/Safari\\/(\\d+)/.exec(navigator.userAgent) ?? ['', 0])[1]) <= 537,\n    });\n  }\n\n  connectedCallback() {\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'search');\n    }\n    super.connectedCallback();\n  }\n\n  render() {\n    const result = super.render();\n    const { expanded, size, _handleSearchClick: handleSearchClick } = this;\n    const classes = classMap({\n      [`${prefix}--search`]: true,\n      [`${prefix}--search--${size}`]: size,\n    });\n    return html` <div class=\"${classes}\" tabindex=\"${expanded ? '-1' : '0'}\" @click=\"${handleSearchClick}\">${result}</div> `;\n  }\n\n  /**\n   * The name of the custom event fired after the search content is changed upon a user gesture.\n   */\n  static get eventInput() {\n    // The code uses on in `<bx-search>`, but definition is done also here for React event generation\n    return `${prefix}-search-input`;\n  }\n\n  static styles = styles;\n}\n\nexport default BXTableToolbarSearch;\n"],"file":"table-toolbar-search.js"}