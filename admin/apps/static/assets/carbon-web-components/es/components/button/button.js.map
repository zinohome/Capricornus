{"version":3,"sources":["components/button/button.ts"],"names":["settings","classMap","html","property","customElement","LitElement","ifNonNull","FocusMixin","BUTTON_KIND","BUTTON_SIZE","BUTTON_ICON_LAYOUT","styles","HostListener","HostListenerMixin","prefix","BXButton","target","name","hasContent","assignedNodes","some","node","nodeType","Node","TEXT_NODE","textContent","trim","requestUpdate","capture","event","disabled","stopPropagation","type","Boolean","reflect","attribute","REGULAR","PRIMARY","attachShadow","mode","delegatesFocus","Number","exec","navigator","userAgent","autofocus","download","href","hreflang","isExpressive","linkRole","kind","ping","rel","size","_hasIcon","hasIcon","_hasMainContent","hasMainContent","_handleSlotChange","handleSlotChange","classes"],"mappings":"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","sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport settings from 'carbon-components/es/globals/js/settings';\nimport { classMap } from 'lit-html/directives/class-map';\nimport { html, property, customElement, LitElement } from 'lit-element';\nimport ifNonNull from '../../globals/directives/if-non-null';\nimport FocusMixin from '../../globals/mixins/focus';\nimport { BUTTON_KIND, BUTTON_SIZE, BUTTON_ICON_LAYOUT } from './defs';\nimport styles from './button.scss';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\n\nexport { BUTTON_KIND, BUTTON_SIZE, BUTTON_ICON_LAYOUT };\n\nconst { prefix } = settings;\n\n/**\n * Button.\n * @element bx-btn\n * @csspart button The button.\n */\n@customElement(`${prefix}-btn`)\nclass BXButton extends HostListenerMixin(FocusMixin(LitElement)) {\n  /**\n   * `true` if there is an icon.\n   */\n  private _hasIcon = false;\n\n  /**\n   * `true` if there is a non-icon content.\n   */\n  private _hasMainContent = false;\n\n  /**\n   * Handles `slotchange` event.\n   */\n  private _handleSlotChange({ target }: Event) {\n    const { name } = target as HTMLSlotElement;\n    const hasContent = (target as HTMLSlotElement)\n      .assignedNodes()\n      .some(node => node.nodeType !== Node.TEXT_NODE || node!.textContent!.trim());\n    this[name === 'icon' ? '_hasIcon' : '_hasMainContent'] = hasContent;\n    this.requestUpdate();\n  }\n\n  @HostListener('click', { capture: true })\n  // @ts-ignore\n  private _handleDisabledClick(event: Event) {\n    const { disabled } = this;\n    if (disabled) {\n      event.stopPropagation();\n    }\n  }\n\n  /**\n   * `true` if the button should have input focus when the page loads.\n   */\n  @property({ type: Boolean, reflect: true })\n  autofocus = false;\n\n  /**\n   * `true` if the button should be disabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * The default file name, used if this button is rendered as `<a>`.\n   */\n  @property({ reflect: true })\n  download!: string;\n\n  /**\n   * Link `href`. If present, this button is rendered as `<a>`.\n   */\n  @property({ reflect: true })\n  href!: string;\n\n  /**\n   * The language of what `href` points to, if this button is rendered as `<a>`.\n   */\n  @property({ reflect: true })\n  hreflang!: string;\n\n  /**\n   * Button icon layout.\n   */\n  @property({ reflect: true, attribute: 'icon-layout' })\n  iconLayout = BUTTON_ICON_LAYOUT.REGULAR;\n\n  /**\n   * `true` if expressive theme enabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  isExpressive = false;\n\n  /**\n   * Button kind.\n   */\n  @property({ reflect: true })\n  kind = BUTTON_KIND.PRIMARY;\n\n  /**\n   * The a11y role for `<a>`.\n   */\n  @property({ attribute: 'link-role' })\n  linkRole = 'button';\n\n  /**\n   * URLs to ping, if this button is rendered as `<a>`.\n   */\n  @property({ reflect: true })\n  ping!: string;\n\n  /**\n   * The link type, if this button is rendered as `<a>`.\n   */\n  @property({ reflect: true })\n  rel!: string;\n\n  /**\n   * Button size.\n   */\n  @property({ reflect: true })\n  size = BUTTON_SIZE.REGULAR;\n\n  /**\n   * The link target, if this button is rendered as `<a>`.\n   */\n  @property({ reflect: true })\n  target!: string;\n\n  /**\n   * The default behavior if the button is rendered as `<button>`. MIME type of the `target`if this button is rendered as `<a>`.\n   */\n  @property({ reflect: true })\n  type!: string;\n\n  createRenderRoot() {\n    return this.attachShadow({\n      mode: 'open',\n      delegatesFocus: Number((/Safari\\/(\\d+)/.exec(navigator.userAgent) ?? ['', 0])[1]) <= 537,\n    });\n  }\n\n  render() {\n    const {\n      autofocus,\n      disabled,\n      download,\n      href,\n      hreflang,\n      isExpressive,\n      linkRole,\n      kind,\n      ping,\n      rel,\n      size,\n      target,\n      type,\n      _hasIcon: hasIcon,\n      _hasMainContent: hasMainContent,\n      _handleSlotChange: handleSlotChange,\n    } = this;\n    const classes = classMap({\n      [`${prefix}--btn`]: true,\n      [`${prefix}--btn--${kind}`]: kind,\n      [`${prefix}--btn--disabled`]: disabled,\n      [`${prefix}--btn--icon-only`]: hasIcon && !hasMainContent,\n      [`${prefix}--btn--sm`]: size === 'sm' && !isExpressive,\n      [`${prefix}--btn--xl`]: size === 'xl',\n      [`${prefix}--btn--field`]: size === 'field' && !isExpressive,\n      [`${prefix}-ce--btn--has-icon`]: hasIcon,\n      [`${prefix}--btn--expressive`]: isExpressive,\n    });\n    if (href) {\n      return disabled\n        ? html`\n            <p id=\"button\" part=\"button\" class=\"${classes}\">\n              <slot @slotchange=\"${handleSlotChange}\"></slot>\n              <slot name=\"icon\" @slotchange=\"${handleSlotChange}\"></slot>\n            </p>\n          `\n        : html`\n            <a\n              id=\"button\"\n              part=\"button\"\n              role=\"${ifNonNull(linkRole)}\"\n              class=\"${classes}\"\n              download=\"${ifNonNull(download)}\"\n              href=\"${ifNonNull(href)}\"\n              hreflang=\"${ifNonNull(hreflang)}\"\n              ping=\"${ifNonNull(ping)}\"\n              rel=\"${ifNonNull(rel)}\"\n              target=\"${ifNonNull(target)}\"\n              type=\"${ifNonNull(type)}\">\n              <slot @slotchange=\"${handleSlotChange}\"></slot>\n              <slot name=\"icon\" @slotchange=\"${handleSlotChange}\"></slot>\n            </a>\n          `;\n    }\n    return html`\n      <button\n        id=\"button\"\n        part=\"button\"\n        class=\"${classes}\"\n        ?autofocus=\"${autofocus}\"\n        ?disabled=\"${disabled}\"\n        type=\"${ifNonNull(type)}\">\n        <slot @slotchange=\"${handleSlotChange}\"></slot>\n        <slot name=\"icon\" @slotchange=\"${handleSlotChange}\"></slot>\n      </button>\n    `;\n  }\n\n  static styles = styles; // `styles` here is a `CSSResult` generated by custom WebPack loader\n}\n\nexport default BXButton;\n"],"file":"button.js"}