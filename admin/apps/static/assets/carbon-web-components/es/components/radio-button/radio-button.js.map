{"version":3,"sources":["components/radio-button/radio-button.ts"],"names":["classMap","html","property","query","customElement","LitElement","settings","ifNonNull","HostListener","FocusMixin","HostListenerMixin","RadioGroupManager","NAVIGATION_DIRECTION","RADIO_BUTTON_LABEL_POSITION","RADIO_BUTTON_ORIENTATION","styles","prefix","navigationDirectionForKeyHorizontal","ArrowLeft","BACKWARD","Left","ArrowRight","FORWARD","Right","navigationDirectionForKeyVertical","ArrowUp","Up","ArrowDown","Down","RadioButtonDelegate","constructor","radio","_radio","checked","host","getRootNode","eventChange","tabIndex","dispatchEvent","CustomEvent","bubbles","composed","detail","name","compareDocumentPosition","other","focus","BXRadioButton","disabled","_radioButtonDelegate","radioButtonDelegate","_manager","select","event","orientation","manager","navigationDirectionForKey","HORIZONTAL","navigationDirection","key","navigate","type","Boolean","reflect","attribute","RIGHT","attachShadow","mode","delegatesFocus","Number","exec","navigator","userAgent","delete","_inputNode","changedProperties","inputNode","has","get","add","setAttribute","shouldBeFocusable","hideLabel","labelText","value","innerLabelClasses"],"mappings":"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","sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit-html/directives/class-map';\nimport { html, property, query, customElement, LitElement } from 'lit-element';\nimport settings from 'carbon-components/es/globals/js/settings';\nimport ifNonNull from '../../globals/directives/if-non-null';\nimport HostListener from '../../globals/decorators/host-listener';\nimport FocusMixin from '../../globals/mixins/focus';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport RadioGroupManager, { NAVIGATION_DIRECTION, ManagedRadioButtonDelegate } from '../../globals/internal/radio-group-manager';\nimport { RADIO_BUTTON_LABEL_POSITION, RADIO_BUTTON_ORIENTATION } from './defs';\nimport styles from './radio-button.scss';\n\nexport { RADIO_BUTTON_LABEL_POSITION };\n\nconst { prefix } = settings;\n\n/**\n * Map of navigation direction by key for horizontal alignment.\n */\nconst navigationDirectionForKeyHorizontal = {\n  ArrowLeft: NAVIGATION_DIRECTION.BACKWARD,\n  Left: NAVIGATION_DIRECTION.BACKWARD, // IE\n  ArrowRight: NAVIGATION_DIRECTION.FORWARD,\n  Right: NAVIGATION_DIRECTION.FORWARD, // IE\n};\n\n/**\n * Map of navigation direction by key for vertical alignment.\n */\nconst navigationDirectionForKeyVertical = {\n  ArrowUp: NAVIGATION_DIRECTION.BACKWARD,\n  Up: NAVIGATION_DIRECTION.BACKWARD, // IE\n  ArrowDown: NAVIGATION_DIRECTION.FORWARD,\n  Down: NAVIGATION_DIRECTION.FORWARD, // IE\n};\n\n/**\n * The interface for `RadioGroupManager` for radio button.\n */\nclass RadioButtonDelegate implements ManagedRadioButtonDelegate {\n  /**\n   * The radio button to target.\n   */\n  private _radio: HTMLInputElement;\n\n  constructor(radio: HTMLInputElement) {\n    this._radio = radio;\n  }\n\n  get checked() {\n    return this._radio.checked;\n  }\n\n  set checked(checked) {\n    const { host } = this._radio.getRootNode() as ShadowRoot;\n    const { eventChange } = host.constructor as typeof BXRadioButton; // eslint-disable-line no-use-before-define\n    (host as BXRadioButton).checked = checked;\n    this._radio.tabIndex = checked ? 0 : -1;\n    host.dispatchEvent(\n      new CustomEvent(eventChange, {\n        bubbles: true,\n        composed: true,\n        detail: {\n          checked,\n        },\n      })\n    );\n  }\n\n  get tabIndex() {\n    return this._radio.tabIndex;\n  }\n\n  set tabIndex(tabIndex) {\n    this._radio.tabIndex = tabIndex;\n  }\n\n  get name() {\n    return this._radio.name;\n  }\n\n  compareDocumentPosition(other: RadioButtonDelegate) {\n    return this._radio.compareDocumentPosition(other._radio);\n  }\n\n  focus() {\n    this._radio.focus();\n  }\n}\n\n/**\n * Radio button.\n * @element bx-radio-button\n * @fires bx-radio-button-changed - The custom event fired after this radio button changes its checked state.\n */\n@customElement(`${prefix}-radio-button`)\nclass BXRadioButton extends HostListenerMixin(FocusMixin(LitElement)) {\n  /**\n   * The radio group manager associated with the radio button.\n   */\n  private _manager: RadioGroupManager | null = null;\n\n  /**\n   * The interface for `RadioGroupManager` for radio button.\n   */\n  private _radioButtonDelegate!: RadioButtonDelegate;\n\n  /**\n   * The hidden radio button.\n   */\n  @query('#input')\n  private _inputNode!: HTMLInputElement;\n\n  /**\n   * Handles `click` event on this element.\n   */\n  @HostListener('click')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleClick = () => {\n    const { disabled, _radioButtonDelegate: radioButtonDelegate } = this;\n    if (radioButtonDelegate && !disabled) {\n      this.checked = true;\n      if (this._manager) {\n        this._manager.select(radioButtonDelegate);\n      }\n    }\n  };\n\n  /**\n   * Handles `keydown` event on this element.\n   */\n  @HostListener('keydown')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleKeydown = (event: KeyboardEvent) => {\n    const { orientation, _radioButtonDelegate: radioButtonDelegate } = this;\n    const manager = this._manager;\n    if (radioButtonDelegate && manager) {\n      const navigationDirectionForKey =\n        orientation === RADIO_BUTTON_ORIENTATION.HORIZONTAL\n          ? navigationDirectionForKeyHorizontal\n          : navigationDirectionForKeyVertical;\n      const navigationDirection = navigationDirectionForKey[event.key];\n      if (navigationDirection) {\n        manager.select(manager.navigate(radioButtonDelegate, navigationDirection));\n      }\n      if (event.key === ' ' || event.key === 'Enter') {\n        manager.select(radioButtonDelegate);\n      }\n    }\n  };\n\n  /**\n   * `true` if this radio button should be checked.\n   */\n  @property({ type: Boolean, reflect: true })\n  checked = false;\n\n  /**\n   * `true` if the check box should be disabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * `true` if the label should be hidden.\n   */\n  @property({ type: Boolean, reflect: true, attribute: 'hide-label' })\n  hideLabel = false;\n\n  /**\n   * The label position.\n   */\n  @property({ reflect: true, attribute: 'label-position' })\n  labelPosition = RADIO_BUTTON_LABEL_POSITION.RIGHT;\n\n  /**\n   * The label text.\n   */\n  @property({ attribute: 'label-text' })\n  labelText = '';\n\n  /**\n   * The `name` attribute for the `<input>` for selection.\n   */\n  @property()\n  name!: string;\n\n  /**\n   * The orientation to lay out radio buttons.\n   */\n  @property({ reflect: true })\n  orientation = RADIO_BUTTON_ORIENTATION.HORIZONTAL;\n\n  /**\n   * The `value` attribute for the `<input>` for selection.\n   */\n  @property()\n  value!: string;\n\n  createRenderRoot() {\n    return this.attachShadow({\n      mode: 'open',\n      delegatesFocus: Number((/Safari\\/(\\d+)/.exec(navigator.userAgent) ?? ['', 0])[1]) <= 537,\n    });\n  }\n\n  disconnectedCallback() {\n    if (this._manager) {\n      this._manager.delete(this._radioButtonDelegate);\n    }\n    super.disconnectedCallback();\n  }\n\n  firstUpdated() {\n    this._radioButtonDelegate = new RadioButtonDelegate(this._inputNode);\n  }\n\n  updated(changedProperties) {\n    const { _inputNode: inputNode, _radioButtonDelegate: radioButtonDelegate, name } = this;\n    if (changedProperties.has('checked') || changedProperties.has('name')) {\n      if (!this._manager) {\n        this._manager = RadioGroupManager.get(this.getRootNode({ composed: true }) as Document);\n      }\n      const { _manager: manager } = this;\n      if (changedProperties.has('name')) {\n        manager!.delete(radioButtonDelegate, changedProperties.get('name'));\n        if (name) {\n          manager!.add(radioButtonDelegate);\n        }\n      }\n      inputNode.setAttribute('tabindex', !name || !manager || !manager.shouldBeFocusable(radioButtonDelegate) ? '-1' : '0');\n    }\n  }\n\n  render() {\n    const { checked, hideLabel, labelText, name, value, disabled } = this;\n    const innerLabelClasses = classMap({\n      [`${prefix}--visually-hidden`]: hideLabel,\n    });\n    return html`\n      <input\n        id=\"input\"\n        type=\"radio\"\n        class=\"${prefix}--radio-button\"\n        .checked=${checked}\n        ?disabled=\"${disabled}\"\n        name=${ifNonNull(name)}\n        value=${ifNonNull(value)} />\n      <label for=\"input\" class=\"${prefix}--radio-button__label\">\n        <span class=\"${prefix}--radio-button__appearance\"></span>\n        <span class=\"${innerLabelClasses}\"><slot>${labelText}</slot></span>\n      </label>\n    `;\n  }\n\n  /**\n   * The name of the custom event fired after this radio button changes its checked state.\n   */\n  static get eventChange() {\n    return `${prefix}-radio-button-changed`;\n  }\n\n  static styles = styles;\n}\n\nexport default BXRadioButton;\n"],"file":"radio-button.js"}