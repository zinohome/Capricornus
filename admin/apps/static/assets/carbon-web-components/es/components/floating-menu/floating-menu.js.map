{"version":3,"sources":["components/floating-menu/floating-menu.ts"],"names":["LitElement","HostListener","FocusMixin","HostListenerMixin","FLOATING_MENU_ALIGNMENT","FLOATING_MENU_DIRECTION","FLOATING_MENU_DIRECTION_GROUP","FLOATING_MENU_POSITION_DIRECTION","observeResize","observer","elem","observe","release","unobserve","closestComposed","selector","found","closest","host","getRootNode","BXFloatingMenu","ResizeObserver","container","open","parent","position","direction","start","top","style","RTL","relatedTarget","contains","HTMLElement","prototype","focus","call","LEFT","VERTICAL","TOP","HORIZONTAL","RIGHT","BOTTOM","constructor","selectorContainer","ownerDocument","body","triggerPosition","TypeError","left","refLeft","refTop","right","refRight","bottom","refBottom","width","height","getBoundingClientRect","containerLeft","containerRight","containerTop","refCenterHorizontal","refCenterVertical","containerComputedStyle","defaultView","getComputedStyle","positionDirection","getPropertyValue","isRtl","containerStartFromViewport","innerWidth","refStartFromContainer","refEndFromContainer","refCenterHorizontalFromContainer","refTopFromContainer","refCenterVerticalFromContainer","Error","alignment","alignmentDirection","Object","values","indexOf","alignmentStart","START","CENTER","END","attachShadow","mode","delegatesFocus","Number","exec","navigator","userAgent","_hObserveResizeContainer","_hObserveResizeParent","changedProperties","has","parentElement","appendChild","_resizeObserver"],"mappings":"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","sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2020\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement } from 'lit-element';\nimport HostListener from '../../globals/decorators/host-listener';\nimport FocusMixin from '../../globals/mixins/focus';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport Handle from '../../globals/internal/handle';\nimport {\n  FLOATING_MENU_ALIGNMENT,\n  FLOATING_MENU_DIRECTION,\n  FLOATING_MENU_DIRECTION_GROUP,\n  FLOATING_MENU_POSITION_DIRECTION,\n} from './defs';\nimport BXFloatingMenuTrigger from './floating-menu-trigger';\n\nexport { FLOATING_MENU_ALIGNMENT, FLOATING_MENU_DIRECTION, FLOATING_MENU_DIRECTION_GROUP, FLOATING_MENU_POSITION_DIRECTION };\n\n/**\n * Position of floating menu, or trigger button of floating menu.\n */\nexport interface FloatingMenuPosition {\n  /**\n   * The LTR/RTL direction used for positioning floating menu.\n   */\n  direction: FLOATING_MENU_POSITION_DIRECTION;\n\n  /**\n   * The start position (Left position for LTR, right position for RTL).\n   */\n  start: number;\n\n  /**\n   * The top position.\n   */\n  top: number;\n}\n\n/**\n * Observes resize of the given element with the given resize observer.\n * @param observer The resize observer.\n * @param elem The element to observe the resize.\n */\nconst observeResize = (observer: ResizeObserver, elem: Element) => {\n  observer.observe(elem);\n  return {\n    release() {\n      observer.unobserve(elem);\n      return null;\n    },\n  } as Handle;\n};\n\n/**\n * @param elem The starting element.\n * @param selector The CSS selector.\n * @returns {Element}\n *   The closest ancestor node of the given element that matches the given selector, crossing Shadow DOM boundary.\n */\nconst closestComposed = (elem: Element, selector: string) => {\n  const found = elem.closest(selector);\n  if (found) {\n    return found;\n  }\n  const { host } = elem.getRootNode() as ShadowRoot;\n  if (host) {\n    return closestComposed(host, selector);\n  }\n  return null;\n};\n\n/**\n * Floating menu.\n */\nabstract class BXFloatingMenu extends HostListenerMixin(FocusMixin(LitElement)) {\n  /**\n   * The handle for observing resize of the element containing the trigger button.\n   */\n  private _hObserveResizeParent: Handle | null = null;\n\n  /**\n   * The handle for observing resize of the floating menu container.\n   */\n  private _hObserveResizeContainer: Handle | null = null;\n\n  /**\n   * The `ResizeObserver` instance for observing element resizes for re-positioning floating menu position.\n   */\n  // TODO: Wait for `.d.ts` update to support `ResizeObserver`\n  // @ts-ignore\n  private _resizeObserver = new ResizeObserver(() => {\n    const { container, open, parent, position } = this;\n    if (container && open && parent) {\n      const { direction, start, top } = position;\n      this.style[direction !== FLOATING_MENU_POSITION_DIRECTION.RTL ? 'left' : 'right'] = `${start}px`;\n      this.style.top = `${top}px`;\n    }\n  });\n\n  @HostListener('focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleBlur = ({ relatedTarget }: FocusEvent) => {\n    if (!this.contains(relatedTarget as Node)) {\n      const { parent } = this;\n      if (parent) {\n        parent.open = false;\n        HTMLElement.prototype.focus.call(this.parent); // SVGElement in IE11 does not have `.focus()` method\n      }\n    }\n  };\n\n  /**\n   * The DOM element, typically a custom element in this library, launching this floating menu.\n   */\n  protected parent: BXFloatingMenuTrigger | null = null;\n\n  /**\n   * How the menu is aligned to the trigger button.\n   */\n  abstract alignment: FLOATING_MENU_ALIGNMENT;\n\n  /**\n   * The menu direction.\n   */\n  abstract direction: FLOATING_MENU_DIRECTION;\n\n  /**\n   * `true` if the menu should be open.\n   */\n  abstract open: boolean;\n\n  /**\n   * The horizontal/vertical direction with regard to how the menu is aligned to the trigger button.\n   */\n  get alignmentDirection() {\n    return {\n      [FLOATING_MENU_DIRECTION.LEFT]: FLOATING_MENU_DIRECTION_GROUP.VERTICAL,\n      [FLOATING_MENU_DIRECTION.TOP]: FLOATING_MENU_DIRECTION_GROUP.HORIZONTAL,\n      [FLOATING_MENU_DIRECTION.RIGHT]: FLOATING_MENU_DIRECTION_GROUP.VERTICAL,\n      [FLOATING_MENU_DIRECTION.BOTTOM]: FLOATING_MENU_DIRECTION_GROUP.HORIZONTAL,\n    }[this.direction];\n  }\n\n  /**\n   * The DOM element to put this menu into.\n   */\n  get container() {\n    return closestComposed(this, (this.constructor as typeof BXFloatingMenu).selectorContainer) || this.ownerDocument!.body;\n  }\n\n  /**\n   * The position of this floating menu.\n   */\n  get position(): FloatingMenuPosition {\n    const { triggerPosition } = this.parent!;\n    if (!triggerPosition) {\n      throw new TypeError('Missing information of trigger button position.');\n    }\n\n    const { container } = this;\n    const { left: refLeft = 0, top: refTop = 0, right: refRight = 0, bottom: refBottom = 0 } = triggerPosition;\n    const { width, height } = this.getBoundingClientRect();\n    const { left: containerLeft = 0, right: containerRight = 0, top: containerTop = 0 } = container.getBoundingClientRect();\n    const refCenterHorizontal = (refLeft + refRight) / 2;\n    const refCenterVertical = (refTop + refBottom) / 2;\n\n    const containerComputedStyle = container.ownerDocument!.defaultView!.getComputedStyle(container);\n    const positionDirection = containerComputedStyle.getPropertyValue('direction') as FLOATING_MENU_POSITION_DIRECTION;\n    const isRtl = positionDirection === FLOATING_MENU_POSITION_DIRECTION.RTL;\n    const containerStartFromViewport = !isRtl ? containerLeft : container.ownerDocument!.defaultView!.innerWidth - containerRight;\n    const refStartFromContainer = !isRtl ? refLeft - containerLeft : containerRight - refRight;\n    const refEndFromContainer = !isRtl ? refRight - containerLeft : containerRight - refLeft;\n    const refCenterHorizontalFromContainer = !isRtl ? refCenterHorizontal - containerLeft : containerRight - refCenterHorizontal;\n    const refTopFromContainer = refTop - containerTop;\n    const refCenterVerticalFromContainer = refCenterVertical - containerTop;\n\n    if (\n      (container !== this.ownerDocument!.body || containerStartFromViewport !== 0 || containerTop !== 0) &&\n      containerComputedStyle.getPropertyValue('position') === 'static'\n    ) {\n      throw new Error('Floating menu container must not have `position:static`.');\n    }\n\n    const { alignment, alignmentDirection, direction } = this;\n    if (Object.values(FLOATING_MENU_ALIGNMENT).indexOf(alignment) < 0) {\n      throw new Error(`Wrong menu alignment: ${alignment}`);\n    }\n    if (Object.values(FLOATING_MENU_DIRECTION).indexOf(direction) < 0) {\n      throw new Error(`Wrong menu position direction: ${direction}`);\n    }\n\n    const alignmentStart = {\n      [FLOATING_MENU_DIRECTION_GROUP.HORIZONTAL]: {\n        [FLOATING_MENU_ALIGNMENT.START]: () => refStartFromContainer,\n        [FLOATING_MENU_ALIGNMENT.CENTER]: () => refCenterHorizontalFromContainer - width / 2,\n        [FLOATING_MENU_ALIGNMENT.END]: () => refEndFromContainer - width,\n      },\n      [FLOATING_MENU_DIRECTION_GROUP.VERTICAL]: {\n        [FLOATING_MENU_ALIGNMENT.START]: () => refTopFromContainer,\n        [FLOATING_MENU_ALIGNMENT.CENTER]: () => refCenterVerticalFromContainer - height / 2,\n        [FLOATING_MENU_ALIGNMENT.END]: () => refBottom - height,\n      },\n    }[alignmentDirection][alignment]();\n\n    const { start, top } = {\n      [FLOATING_MENU_DIRECTION.LEFT]: () => ({\n        start: refStartFromContainer - width,\n        top: alignmentStart,\n      }),\n      [FLOATING_MENU_DIRECTION.TOP]: () => ({\n        start: alignmentStart,\n        top: refTopFromContainer - height,\n      }),\n      [FLOATING_MENU_DIRECTION.RIGHT]: () => ({\n        start: refEndFromContainer,\n        top: alignmentStart,\n      }),\n      [FLOATING_MENU_DIRECTION.BOTTOM]: () => ({\n        start: alignmentStart,\n        top: refBottom,\n      }),\n    }[direction]();\n\n    return {\n      direction: positionDirection,\n      start,\n      top,\n    };\n  }\n\n  createRenderRoot() {\n    return this.attachShadow({\n      mode: 'open',\n      delegatesFocus: Number((/Safari\\/(\\d+)/.exec(navigator.userAgent) ?? ['', 0])[1]) <= 537,\n    });\n  }\n\n  disconnectedCallback() {\n    if (this._hObserveResizeContainer) {\n      this._hObserveResizeContainer = this._hObserveResizeContainer.release();\n    }\n    if (this._hObserveResizeParent) {\n      this._hObserveResizeParent = this._hObserveResizeParent.release();\n    }\n  }\n\n  updated(changedProperties) {\n    const { container, open, parent } = this;\n    if ((changedProperties.has('alignment') || changedProperties.has('direction') || changedProperties.has('open')) && open) {\n      if (!parent) {\n        this.parent = this.parentElement as BXFloatingMenuTrigger;\n        container.appendChild(this);\n      }\n      // Note: `this.position` cannot be referenced until `this.parent` is set\n      const { direction, start, top } = this.position;\n      this.style[direction !== FLOATING_MENU_POSITION_DIRECTION.RTL ? 'left' : 'right'] = `${start}px`;\n      this.style.top = `${top}px`;\n    }\n    if (changedProperties.has('open')) {\n      if (this._hObserveResizeContainer) {\n        this._hObserveResizeContainer = this._hObserveResizeContainer.release();\n      }\n      if (this._hObserveResizeParent) {\n        this._hObserveResizeParent = this._hObserveResizeParent.release();\n      }\n      if (open) {\n        const { parentElement } = this.parent ?? {};\n        this._hObserveResizeContainer = observeResize(this._resizeObserver, container);\n        if (parentElement) {\n          this._hObserveResizeParent = observeResize(this._resizeObserver, parentElement);\n        }\n      }\n    }\n  }\n\n  /**\n   * A constant indicating that this class is a floating menu.\n   */\n  static FLOATING_MENU = true;\n\n  /**\n   * The CSS selector to find the element to put this floating menu in.\n   */\n  static get selectorContainer() {\n    return '[data-floating-menu-container],bx-modal';\n  }\n}\n\nexport default BXFloatingMenu;\n"],"file":"floating-menu.js"}